" vim: set fdm=marker

autocmd Filetype md call SetMdFolds()
autocmd Filetype vrc call SetVRCFolds()

" vimrc "{{{

function! SetVRCFolds()

    function! VimrcFolds()
        let thisline = getline(v:lnum)
        if match(thisline, '^##') >= 0
            return ">2"
        elseif match(thisline, '^#') >= 0
            return ">1"
        else
            return "="
        endif
    endfunction
    setlocal foldmethod=expr
    setlocal foldexpr=VimrcFolds()

    function! VimrcFoldText()
        let foldsize = (v:foldend-v:foldstart)
        return getline(v:foldstart).' ('.foldsize.'
        lines)'
    endfunction
    setlocal foldtext=VimrcFoldText()

endfunction

" vimrc "}}}
" markdown "{{{

function! SetMdFolds()

    function! MarkdownFolds()
        let thisline = getline(v:lnum)
        if match(thisline, '^##') >= 0
            return ">2"
        elseif match(thisline, '^#') >= 0
            return ">1"
        else
            return "="
        endif
    endfunction
    setlocal foldmethod=expr
    setlocal foldexpr=MarkdownFolds()

    function! MarkdownFoldText()
        let foldsize = (v:foldend-v:foldstart)
        return getline(v:foldstart).' ('.foldsize.'
        lines)'
    endfunction
    setlocal foldtext=MarkdownFoldText()

endfunction

" markdown "}}}
